<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>NOVA CORPS // INFINITY CORE CONTAINMENT</title>

<style>
  :root{
    --cyan:#00eaff;
    --red:#ff2b2b;
    --good:#5dffb2;
    --warn:#ffd65d;
    --bg:#000;
  }

  html,body{
    margin:0;
    height:100%;
    background:var(--bg);
    color:var(--cyan);
    font-family:"Courier New", monospace;
    overflow:hidden;
  }

  /* ===== Galaxy Background ===== */
  .galaxy{
    position:fixed; inset:0;
    background:
      radial-gradient(1200px 800px at 20% 30%, rgba(0,234,255,0.10), transparent 55%),
      radial-gradient(900px 600px at 80% 70%, rgba(255,255,255,0.06), transparent 60%),
      radial-gradient(700px 700px at 50% 50%, rgba(255,0,200,0.05), transparent 60%),
      radial-gradient(900px 900px at 10% 90%, rgba(0,80,255,0.08), transparent 60%),
      radial-gradient(900px 900px at 90% 10%, rgba(0,255,140,0.06), transparent 60%),
      #000;
    animation: drift 18s linear infinite;
    filter: saturate(1.2) contrast(1.1);
    z-index:-3;
  }
  @keyframes drift{
    0%{ transform: scale(1) translate(0,0); }
    50%{ transform: scale(1.05) translate(-1.5%, 1.5%); }
    100%{ transform: scale(1) translate(0,0); }
  }

  .stars,.stars2{
    position:fixed; inset:-200px;
    background-image:
      radial-gradient(2px 2px at 10% 20%, rgba(255,255,255,0.7), transparent 60%),
      radial-gradient(1px 1px at 30% 80%, rgba(255,255,255,0.6), transparent 60%),
      radial-gradient(1px 1px at 70% 40%, rgba(255,255,255,0.55), transparent 60%),
      radial-gradient(2px 2px at 90% 70%, rgba(255,255,255,0.7), transparent 60%),
      radial-gradient(1px 1px at 55% 15%, rgba(255,255,255,0.5), transparent 60%),
      radial-gradient(1px 1px at 15% 65%, rgba(255,255,255,0.5), transparent 60%),
      radial-gradient(2px 2px at 45% 55%, rgba(255,255,255,0.65), transparent 60%),
      radial-gradient(1px 1px at 80% 25%, rgba(255,255,255,0.5), transparent 60%);
    background-size: 900px 900px;
    opacity:0.55;
    animation: starScroll 28s linear infinite;
    z-index:-2;
  }
  .stars2{
    background-size: 650px 650px;
    opacity:0.35;
    animation-duration: 42s;
    filter: blur(0.4px);
    z-index:-1;
  }
  @keyframes starScroll{
    0%{ transform: translateY(0); }
    100%{ transform: translateY(120px); }
  }

  /* ===== Console Wrapper ===== */
  .wrap{
    width:min(940px, 92vw);
    margin: 36px auto 0;
    padding: 20px 22px 28px;
    border:1px solid rgba(0,234,255,0.35);
    border-radius: 18px;
    background: linear-gradient(180deg, rgba(0,234,255,0.08), rgba(0,0,0,0.55));
    box-shadow: 0 0 30px rgba(0,234,255,0.12);
    position:relative;
  }

  /* ===== Glitch Scanlines ===== */
  .glitch-lines{
    pointer-events:none;
    position:absolute; inset:0;
    background:
      repeating-linear-gradient(
        to bottom,
        rgba(0,234,255,0.03),
        rgba(0,234,255,0.03) 1px,
        transparent 2px,
        transparent 6px
      );
    mix-blend-mode: screen;
    opacity:0.35;
    animation: scan 2.8s linear infinite;
    border-radius: 18px;
  }
  @keyframes scan{
    0%{ transform: translateY(-12px); }
    100%{ transform: translateY(12px); }
  }

  .header{
    display:flex;
    gap:16px;
    align-items:flex-start;
    justify-content:space-between;
    flex-wrap:wrap;
  }

  .title{
    text-align:left;
    line-height:1.1;
  }
  .title h1{
    margin:0;
    font-size: 22px;
    letter-spacing: 3px;
    text-transform: uppercase;
    animation: flicker 3.2s infinite;
  }
  .title .sub{
    margin-top:6px;
    font-size: 12px;
    letter-spacing: 2px;
    color: rgba(0,234,255,0.8);
  }
  @keyframes flicker{
    0%, 100%{ opacity: 1; }
    50%{ opacity: 0.68; }
    52%{ opacity: 0.9; }
    55%{ opacity: 0.62; }
    58%{ opacity: 0.95; }
  }

  .rightStatus{
    text-align:right;
    font-size:12px;
    letter-spacing:2px;
    color: rgba(255,255,255,0.7);
  }

  /* ===== Orb / Core ===== */
  .coreRow{
    display:grid;
    grid-template-columns: 240px 1fr;
    gap: 22px;
    margin-top: 18px;
    align-items:start;
  }
  @media (max-width: 720px){
    .coreRow{ grid-template-columns: 1fr; }
  }

  .orb{
    width: 210px;
    height: 210px;
    border-radius: 50%;
    margin: 0 auto;
    background:
      radial-gradient(circle at 30% 30%, rgba(255,255,255,0.85), rgba(0,234,255,0.35) 25%, rgba(0,0,0,0.95) 70%),
      radial-gradient(circle at 70% 70%, rgba(255,0,200,0.18), transparent 55%);
    box-shadow:
      0 0 18px rgba(0,234,255,0.35),
      0 0 48px rgba(0,234,255,0.18);
    position:relative;
    overflow:hidden;
  }
  .orb::before{
    content:"";
    position:absolute;
    inset:-30%;
    background:
      conic-gradient(from 90deg,
        rgba(0,234,255,0.0),
        rgba(0,234,255,0.25),
        rgba(255,255,255,0.12),
        rgba(0,0,0,0),
        rgba(255,0,200,0.15),
        rgba(0,234,255,0.0));
    animation: spin 4.2s linear infinite;
    filter: blur(1px) contrast(1.1);
    opacity:0.85;
  }
  .orb::after{
    content:"";
    position:absolute;
    inset:0;
    background:
      radial-gradient(circle at 40% 55%, rgba(0,234,255,0.35), transparent 55%),
      radial-gradient(circle at 60% 35%, rgba(255,255,255,0.14), transparent 55%),
      radial-gradient(circle at 50% 50%, rgba(0,0,0,0.1), transparent 60%);
    mix-blend-mode: screen;
    animation: pulse 1.6s ease-in-out infinite;
  }
  @keyframes spin{ to{ transform: rotate(360deg); } }
  @keyframes pulse{
    0%, 100%{ opacity:0.55; transform: scale(1); }
    50%{ opacity:0.95; transform: scale(1.02); }
  }

  .shake{ animation: shake 0.2s infinite; }
  @keyframes shake{
    0%{ transform: translate(0,0); }
    25%{ transform: translate(1px,-1px); }
    50%{ transform: translate(-1px,1px); }
    75%{ transform: translate(1px,1px); }
    100%{ transform: translate(-1px,-1px); }
  }

  /* ===== Panels ===== */
  .panel{
    border:1px solid rgba(0,234,255,0.25);
    border-radius:14px;
    padding:16px 16px 14px;
    background: rgba(0,0,0,0.35);
  }

  .panel h2{
    margin:0 0 10px;
    font-size:14px;
    letter-spacing:2px;
    color: rgba(0,234,255,0.9);
    text-transform: uppercase;
  }

  .actions{
    margin-top: 10px;
    display:flex;
    gap:10px;
    flex-wrap:wrap;
    justify-content:flex-start;
  }
  button{
    background: rgba(0,234,255,0.95);
    color:black;
    border:none;
    padding:10px 14px;
    border-radius: 12px;
    cursor:pointer;
    font-weight:700;
    letter-spacing:1px;
  }
  button.secondary{
    background: rgba(255,255,255,0.12);
    color: rgba(255,255,255,0.9);
    border: 1px solid rgba(255,255,255,0.18);
  }
  button.danger{
    background: rgba(255,43,43,0.95);
    color:black;
  }

  .statusBar{
    margin-top:14px;
    display:flex;
    justify-content:space-between;
    align-items:center;
    gap:10px;
    flex-wrap:wrap;
    font-size:12px;
    letter-spacing:2px;
    color: rgba(255,255,255,0.7);
  }

  .statusText{
    margin-top:8px;
    font-size:14px;
    letter-spacing:2px;
    text-align:left;
    line-height:1.6;
  }

  .good{ color: var(--good); }
  .bad{ color: var(--red); }
  .warn{ color: var(--warn); }

  /* ===== Boot / Loading ===== */
  .boot{
    position:fixed; inset:0;
    display:grid;
    place-items:center;
    background:#000;
    z-index: 9998;
  }
  .bootBox{
    width:min(780px, 92vw);
    border:1px solid rgba(0,234,255,0.35);
    border-radius:18px;
    padding: 20px 20px 18px;
    background: rgba(0,0,0,0.55);
    box-shadow: 0 0 30px rgba(0,234,255,0.12);
    position:relative;
    overflow:hidden;
  }
  .bootTitle{
    text-transform:uppercase;
    letter-spacing:3px;
    font-size:18px;
    margin:0 0 8px;
    animation: flicker 3.2s infinite;
  }
  .bootLog{
    margin:0;
    font-size:12px;
    letter-spacing:2px;
    color: rgba(255,255,255,0.75);
    line-height:1.6;
    min-height: 150px;
    white-space:pre-wrap;
  }
  .bar{
    margin-top:14px;
    height: 10px;
    border-radius: 999px;
    border:1px solid rgba(0,234,255,0.35);
    overflow:hidden;
  }
  .fill{
    height:100%;
    width:0%;
    background: rgba(0,234,255,0.9);
    transition: width 0.25s linear;
  }
  .bootHint{
    margin-top: 12px;
    font-size:11px;
    letter-spacing:2px;
    color: rgba(255,255,255,0.6);
  }

  /* ===== Granted / Denied Overlays ===== */
  .overlay{
    position:fixed; inset:0;
    display:none;
    place-items:center;
    z-index: 9999;
    text-align:center;
    backdrop-filter: blur(2px);
  }
  .overlay .card{
    width:min(820px, 92vw);
    border-radius: 18px;
    padding: 24px 18px;
    border:1px solid rgba(255,255,255,0.15);
    background: rgba(0,0,0,0.65);
    box-shadow: 0 0 40px rgba(0,0,0,0.6);
  }
  .overlay h1{
    margin:0 0 10px;
    font-size:34px;
    letter-spacing:5px;
    text-transform: uppercase;
  }
  .overlay p{
    margin:0;
    font-size:12px;
    letter-spacing:2px;
    line-height:1.7;
    color: rgba(255,255,255,0.8);
  }

  .granted{
    background: radial-gradient(900px 700px at 50% 50%, rgba(93,255,178,0.12), transparent 60%);
  }
  .granted h1{ color: var(--good); }
  .granted .card{
    border-color: rgba(93,255,178,0.35);
    box-shadow: 0 0 50px rgba(93,255,178,0.12);
  }

  .denied{
    background: radial-gradient(900px 700px at 50% 50%, rgba(255,43,43,0.12), transparent 60%);
    animation: denyPulse 0.18s infinite;
  }
  @keyframes denyPulse{
    0%{ filter: contrast(1.1); }
    50%{ filter: contrast(1.4); }
    100%{ filter: contrast(1.1); }
  }
  .denied h1{ color: var(--red); }
  .denied .card{
    border-color: rgba(255,43,43,0.35);
    box-shadow: 0 0 50px rgba(255,43,43,0.12);
  }

  /* ===== “Rocket hacked the text” effect ===== */
  .glitchText{
    position:relative;
    display:inline-block;
  }
  .glitchText::before,
  .glitchText::after{
    content: attr(data-text);
    position:absolute;
    left:0; top:0;
    width:100%;
    overflow:hidden;
    opacity:0.8;
    pointer-events:none;
  }
  .glitchText::before{
    transform: translate(1px, 0);
    color: rgba(255,43,43,0.9);
    clip-path: inset(0 0 55% 0);
    animation: g1 1.2s infinite steps(2,end);
  }
  .glitchText::after{
    transform: translate(-1px, 0);
    color: rgba(0,234,255,0.9);
    clip-path: inset(55% 0 0 0);
    animation: g2 1.6s infinite steps(2,end);
  }
  @keyframes g1{
    0%{ clip-path: inset(0 0 70% 0); opacity:0.65; }
    20%{ clip-path: inset(10% 0 55% 0); opacity:0.85; }
    40%{ clip-path: inset(35% 0 35% 0); opacity:0.55; }
    60%{ clip-path: inset(55% 0 10% 0); opacity:0.9; }
    80%{ clip-path: inset(15% 0 65% 0); opacity:0.75; }
    100%{ clip-path: inset(0 0 70% 0); opacity:0.65; }
  }
  @keyframes g2{
    0%{ clip-path: inset(65% 0 0 0); opacity:0.65; }
    25%{ clip-path: inset(45% 0 10% 0); opacity:0.9; }
    50%{ clip-path: inset(30% 0 25% 0); opacity:0.55; }
    75%{ clip-path: inset(10% 0 55% 0); opacity:0.85; }
    100%{ clip-path: inset(65% 0 0 0); opacity:0.65; }
  }

  /* ===== Breach takeover ===== */
  .takeover{
    position:fixed;
    inset:0;
    display:none;
    place-items:center;
    background:#000;
    z-index: 10000;
    color: var(--red);
    text-align:center;
  }
  .takeover h1{
    font-size: 34px;
    letter-spacing: 4px;
    margin:0 0 12px;
    text-transform: uppercase;
    animation: breachFlicker 0.8s infinite;
  }
  .takeover p{
    margin:0;
    width:min(820px, 90vw);
    color: rgba(255,255,255,0.8);
    letter-spacing: 2px;
    line-height:1.6;
    font-size: 12px;
  }
  @keyframes breachFlicker{
    0%{ opacity:1; }
    25%{ opacity:0.25; }
    50%{ opacity:0.9; transform: translateX(1px); }
    75%{ opacity:0.35; transform: translateX(-1px); }
    100%{ opacity:1; }
  }
  .breachFlash{ animation: flash 0.12s infinite; }
  @keyframes flash{
    0%{ background:#000; }
    50%{ background:#290000; }
    100%{ background:#000; }
  }

  /* small helper */
  .tinyNote{
    margin-top:12px;
    font-size:12px;
    color: rgba(255,255,255,0.65);
    letter-spacing: 1px;
    line-height: 1.6;
  }
</style>
</head>

<body>
  <div class="galaxy"></div>
  <div class="stars"></div>
  <div class="stars2"></div>

  <!-- ===== BOOT / LOADING ===== -->
  <div class="boot" id="boot">
    <div class="bootBox">
      <div class="glitch-lines" style="border-radius:18px;"></div>
      <div class="bootTitle">NOVA CORPS HANDSHAKE • INIT</div>
      <pre class="bootLog" id="bootLog"></pre>
      <div class="bar"><div class="fill" id="bootFill"></div></div>
      <div class="bootHint">Link established → Loading containment console…</div>
    </div>
  </div>

  <!-- ===== ACCESS OVERLAYS ===== -->
  <div class="overlay granted" id="overlayGranted">
    <div class="card">
      <h1>ACCESS GRANTED</h1>
      <p>
        NOVA CORPS CLEARANCE VERIFIED<br/>
        JUMP POINT STABILIZATION AUTHORIZED<br/>
        CONTAINMENT TRANSFER: ENABLED
      </p>
    </div>
  </div>

  <div class="overlay denied" id="overlayDenied">
    <div class="card">
      <h1>ACCESS DENIED</h1>
      <p>
        CLEARANCE FAILURE DETECTED<br/>
        CORE SURGE INCREASING<br/>
        REAUTHORIZATION REQUIRED
      </p>
    </div>
  </div>

  <!-- ===== MAIN UI ===== -->
  <div class="wrap" id="ui" style="display:none;">
    <div class="glitch-lines"></div>

    <div class="header">
      <div class="title">
        <h1>GUARDIANS // INFINITY CORE</h1>
        <div class="sub">TEMPORAL JUMP STABILIZATION • CONTAINMENT TRANSFER REQUEST</div>
      </div>
      <div class="rightStatus" id="rightStatus">
        NODE: XANDAR-RELAY-07<br/>
        SIGNAL: LOCKED<br/>
        MODE: INTAKE
      </div>
    </div>

    <div class="coreRow">
      <div>
        <div class="orb" id="orb"></div>
        <div class="statusBar">
          <div>CORE STATUS: <span id="coreStatus" class="warn">UNSTABLE</span></div>
          <div>INSTABILITY: <span id="timer" class="bad">45s</span></div>
        </div>
      </div>

      <!-- ===== Phase 1 ===== -->
      <div class="panel" id="panelAuth">
        <h2>Phase 1 • Priority Jump Point Request</h2>

        <!-- Incursion / incident box -->
        <div class="panel" style="margin-top:10px;">
          <h2>UNSTABLE ORB • INCURSION EVENT</h2>
          <div class="statusText" style="margin-top:6px;">
            STATUS: <span class="bad">ACTIVE</span><br/>
            INCURSION LEVEL: <span class="warn">OMEGA (LOCALIZED)</span><br/>
            REQUEST: <span class="warn">PRIORITY ACCESS</span> to Jump Point <span class="warn">XANDAR</span><br/><br/>
            RISK: Temporal shear / multiverse destabilization if intake is delayed.<br/>
            RECOMMENDATION: Immediate containment transfer + controlled boarding.
          </div>
        </div>

        <div class="statusText" id="statusText" style="margin-top:12px;">
          STATUS: <span class="warn">AWAITING AUTHORIZATION</span><br/>
          NOTE: CORE WILL NOT AUTO-RESET. THIS CONSOLE IS FOR INTAKE USE ONLY.
        </div>

        <div class="actions">
          <button onclick="authorize()">AUTHORIZE PRIORITY ACCESS</button>
          <button class="secondary" onclick="denyRequest()">DENY REQUEST</button>
          <button class="secondary" onclick="relock()">LOCKDOWN</button>
        </div>

        <div class="tinyNote">
          ROUTE: <span class="warn">NOVA PRIME → XANDAR INTAKE</span> • PACKET: <span class="warn">JUMPPOINT CLEARANCE</span>
        </div>
      </div>

      <!-- ===== Granted: Boarding Instructions ===== -->
      <div class="panel" id="panelBoarding" style="display:none;">
        <h2>Access Granted • Cast Member Instructions</h2>

        <div class="statusText">
          <span class="good">PRIORITY ACCESS AUTHORIZED</span><br/>
          DESTINATION: <span class="good">JUMP POINT XANDAR</span><br/><br/>

          <span class="warn">CAST MEMBER PROMPT</span><br/>
          Please call the full party forward to <span class="good">scan bands</span> for containment transfer and boarding.<br/><br/>

          OPERATOR NOTE: Orb is unstable — keep the party together and move directly to intake.
        </div>

        <div class="actions" style="margin-top:14px;">
          <button class="secondary" onclick="relock()">HOLD POSITION</button>
          <button class="danger" onclick="forceBreach()">SIMULATE BREACH</button>
        </div>
      </div>

      <!-- ===== Denied: Guardians playful + “orb as token” ===== -->
      <div class="panel" id="panelDeniedGift" style="display:none;">
        <h2>Access Denied • Containment Courtesy</h2>

        <div class="statusText">
          <span class="bad">REQUEST DENIED</span><br/>
          PRIORITY ACCESS: REJECTED<br/><br/>

          <span class="warn">GUARDIANS RESPONSE</span><br/><br/>

          <span class="glitchText" id="deniedSpeech" data-text="&quot;Okay. Wow. Bold move.&quot;
&quot;We respect it. Not smart — but we respect it.&quot;

So here’s the deal — we are NOT trying to unravel the multiverse today.
And you probably aren’t either.

Therefore, as a totally generous, definitely heroic gesture…

Please accept this unstable orb as a token of appreciation.

(Seriously. It hums louder when it’s ignored.)">
&quot;Okay. Wow. Bold move.&quot;<br/>
&quot;We respect it. Not smart — but we respect it.&quot;<br/><br/>
So here’s the deal — we are <span class="good">NOT</span> trying to unravel the multiverse today.<br/>
And you probably aren’t either.<br/><br/>
Therefore, as a totally generous, definitely heroic gesture…<br/><br/>
Please accept this <span class="warn">unstable orb</span> as a token of appreciation.<br/><br/>
(Seriously. It hums louder when it’s ignored.)
          </span>
        </div>

        <div class="actions" style="margin-top:14px;">
          <button onclick="retryAuthorize()">FINE. AUTHORIZE IT.</button>
          <button class="secondary" onclick="relock()">WE’LL HOLD IT… FOR NOW.</button>
        </div>
      </div>

    </div>
  </div>

  <!-- ===== Breach takeover ===== -->
  <div class="takeover" id="takeover">
    <div id="takeoverBox">
      <h1>INFINITY CORE BREACH</h1>
      <p>
        CONTAINMENT FAILURE DETECTED • TEMPORAL SHEAR IMMINENT<br/>
        NOVA CORPS UPLINK COMPROMISED • INITIATING EMERGENCY BLACKOUT<br/><br/>
        IF YOU CAN READ THIS, YOU ARE TOO CLOSE.
      </p>
    </div>
  </div>

<script>
  // ===== State =====
  let timeLeft = 45;
  let interval = null;
  let authorized = false;

  // ===== Elements =====
  const orb = document.getElementById("orb");
  const coreStatus = document.getElementById("coreStatus");
  const timerEl = document.getElementById("timer");
  const statusText = document.getElementById("statusText");
  const rightStatus = document.getElementById("rightStatus");

  const panelAuth = document.getElementById("panelAuth");
  const panelBoarding = document.getElementById("panelBoarding");
  const panelDeniedGift = document.getElementById("panelDeniedGift");

  const takeover = document.getElementById("takeover");
  const takeoverBox = document.getElementById("takeoverBox");

  const boot = document.getElementById("boot");
  const bootLog = document.getElementById("bootLog");
  const bootFill = document.getElementById("bootFill");

  const overlayGranted = document.getElementById("overlayGranted");
  const overlayDenied = document.getElementById("overlayDenied");

  // ===== Boot sequence =====
  const bootLines = [
    "LINK: XANDAR-RELAY-07 … CONNECTING",
    "HANDSHAKE: NOVA CORPS PROTOCOL v7.9",
    "ROUTE: NOVA PRIME UPLINK • ESTABLISHED",
    "CORE SIGNAL: UNSTABLE • TELEMETRY STREAMING",
    "JUMP POINT MODEL: LOADING",
    "CONTAINMENT SUBROUTINES: READY",
    "CONSOLE: CLEARANCE REQUIRED"
  ];

  let bootIndex = 0;
  let bootPct = 0;

  const bootTimer = setInterval(()=>{
    if(bootIndex < bootLines.length){
      bootLog.textContent += bootLines[bootIndex] + "\n";
      bootIndex++;
    }
    bootPct = Math.min(100, bootPct + 8 + Math.floor(Math.random()*8));
    bootFill.style.width = bootPct + "%";

    if(bootPct >= 100){
      clearInterval(bootTimer);
      setTimeout(()=>{
        boot.style.display = "none";
        document.getElementById("ui").style.display = "block";
        startCountdown();
      }, 450);
    }
  }, 260);

  // ===== Countdown (no auto reset) =====
  function startCountdown(){
    if(interval) return;
    interval = setInterval(() => {
      timeLeft--;
      timerEl.textContent = `${timeLeft}s`;

      if(timeLeft <= 15 && timeLeft > 0){
        orb.classList.add("shake");
        coreStatus.textContent = "CRITICAL";
        coreStatus.className = "bad";
        rightStatus.innerHTML = `NODE: XANDAR-RELAY-07<br/>SIGNAL: DEGRADED<br/>MODE: EMERGENCY`;
      }

      if(timeLeft <= 0){
        clearInterval(interval);
        interval = null;
        meltdown(false);
      }
    }, 1000);
  }

  function showOverlay(el, ms=1000){
    el.style.display = "grid";
    setTimeout(()=>{ el.style.display = "none"; }, ms);
  }

  // ===== Primary buttons =====
  function authorize(){
    // Always success: this is your “intended” path
    statusText.innerHTML =
      "STATUS: <span class='warn'>TRANSMITTING…</span><br/>Awaiting Nova Prime response…";

    setTimeout(()=>{
      authorized = true;

      showOverlay(overlayGranted, 1100);

      coreStatus.textContent = "AUTHORIZED";
      coreStatus.className = "good";

      rightStatus.innerHTML = `NODE: XANDAR-RELAY-07<br/>SIGNAL: GREEN<br/>MODE: AUTHORIZED`;

      // Route to Boarding Instructions
      panelAuth.style.display = "none";
      panelDeniedGift.style.display = "none";
      panelBoarding.style.display = "block";

      // Lock timer once authorized (no reset)
      if(interval){
        clearInterval(interval);
        interval = null;
      }
      timerEl.textContent = "LOCKED";
      orb.classList.remove("shake");
    }, 650);
  }

  function denyRequest(){
    showOverlay(overlayDenied, 950);

    coreStatus.textContent = "REJECTED";
    coreStatus.className = "bad";

    rightStatus.innerHTML = `NODE: XANDAR-RELAY-07<br/>SIGNAL: LOCKED<br/>MODE: DENIED`;

    // Route to denial script
    panelAuth.style.display = "none";
    panelBoarding.style.display = "none";
    panelDeniedGift.style.display = "block";
  }

  function retryAuthorize(){
    // return to main request
    panelAuth.style.display = "block";
    panelBoarding.style.display = "none";
    panelDeniedGift.style.display = "none";

    coreStatus.textContent = "UNSTABLE";
    coreStatus.className = "warn";

    rightStatus.innerHTML = `NODE: XANDAR-RELAY-07<br/>SIGNAL: LOCKED<br/>MODE: INTAKE`;

    statusText.innerHTML =
      "STATUS: <span class='warn'>AWAITING AUTHORIZATION</span><br/>NOTE: CORE WILL NOT AUTO-RESET. THIS CONSOLE IS FOR INTAKE USE ONLY.";
  }

  function relock(){
    rightStatus.innerHTML = `NODE: XANDAR-RELAY-07<br/>SIGNAL: LOCKED<br/>MODE: HOLD`;
    statusText.innerHTML = "STATUS: <span class='warn'>LOCKDOWN ENABLED</span><br/>Awaiting next command.";
  }

  // ===== Breach simulation / timeout =====
  function forceBreach(){ meltdown(true); }

  function meltdown(forced){
    takeover.style.display = "grid";
    takeover.classList.add("breachFlash");
    document.getElementById("ui").style.display = "none";

    const lines = [
      "OVERRIDE: CONTAINMENT FAILED",
      "TEMPORAL SHEAR DETECTED",
      "JUMP POINT COLLAPSE IN PROGRESS",
      "NOVA CORPS UPLINK COMPROMISED",
      "LOCKING OUT LOCAL CONSOLE",
      "DO NOT APPROACH THE ORB",
      "ERROR: REALITY INTEGRITY < 12%",
      "—",
      forced ? "MANUAL BREACH INITIATED" : "TIMEOUT BREACH INITIATED"
    ];

    let i = 0;
    setInterval(()=>{
      takeoverBox.querySelector("p").innerHTML =
        lines.slice(0, Math.min(i, lines.length)).join("<br/>") +
        "<br/><br/>" +
        "<span style='color:rgba(255,255,255,0.65)'>" + randomNoise(60) + "</span>";
      if(i < lines.length) i++;
    }, 180);

    setInterval(()=>{
      takeover.style.background = (takeover.style.background === "rgb(0, 0, 0)") ? "#120000" : "#000";
    }, 120);
  }

  function randomNoise(n){
    const chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*()-_=+[]{}<>/\\|";
    let out = "";
    for(let i=0;i<n;i++) out += chars[Math.floor(Math.random()*chars.length)];
    return out;
  }

  // Enter key: Authorize from main request; “Fine. Authorize it.” from denial
  document.addEventListener("keydown", (e)=>{
    if(e.key !== "Enter") return;
    if(panelAuth.style.display !== "none") authorize();
  });
</script>
</body>
</html>
